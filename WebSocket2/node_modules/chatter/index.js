//this is now a module that can be used for other projects
var all_sockets = null;

//allows sockets to be set outside of this file
exports.set_sockets = function (sockets) {
	all_sockets = sockets;
};

//connect chatter function, takes object for configuration
exports.connect_chatter = function (config) {
	
	config.socket.emit('entrance', {message: 'Welcome!'});
	all_sockets.emit('entrance', {message: config.username + ' is online.'});

	config.socket.on('disconnect', function () {
		all_sockets.emit('exit', {message: config.username + ' has logged off.'});
	});

	config.socket.on('chat', function (data) {
		all_sockets.emit('chat', {message: config.username + ' says: ' + data.message});
	});
};

exports.failure = function (socket) {
	socket.emit('error', {message: 'Please long into the chatroom'});
};
